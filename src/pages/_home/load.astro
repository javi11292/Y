---
import { GET as GETAll } from "$api/post/all/[...page]";
import { GET as GetFollowing } from "$api/post/following/[...page]";
import type { LoggedAstroGlobal } from "$lib/types";
import AstroLoad from "$lib/commons/components/astro-load";

const [all, following] = await Promise.all([
	GETAll(Astro as LoggedAstroGlobal).then((response) => response.json()),
	GetFollowing(Astro as LoggedAstroGlobal).then((response) => response.json()),
]);
---

<AstroLoad id="home" data={{ all, following }} />

<script>
	import { load } from "./load";

	load("home");
</script>
