---
import { GET as GETPosts } from "$api/post/[user]/[...page]";
import { GET as GETUser } from "$api/user/[user]";
import AstroLoad from "$lib/commons/components/astro-load";
import type { LoggedAstroGlobal } from "$lib/types";

const [user, posts] = await Promise.all([
	GETUser(Astro as LoggedAstroGlobal).then((response) => response.json()),
	GETPosts(Astro).then((response) => response.json()),
]);
---

<AstroLoad id={`[user] ${Astro.params.user}`} data={{ user, posts }} />
